{% extends "base.html" %}

{% block title %}{{ page_title }} - NissaHub{% endblock %}

{% block content %}
<div class="container">
    <section class="creator-profile-header">
        <img src="{{ creator.avatar_url or url_for('static', filename='img/avatar_placeholder.png') }}" alt="Avatar for {{ creator.displayName }}" class="creator-avatar">
        <div class="creator-info">
            <h1>{{ creator.displayName or 'NissaHub Creator' }}</h1>
            <p>{{ creator.bio or 'This creator has not added a bio yet.' }}</p>
        </div>
    </section>

    <nav class="storefront-nav" id="storefront-nav">
        <button class="storefront-tab active" data-tab-target="#courses-panel">Courses</button>
        <button class="storefront-tab" data-tab-target="#products-panel">Products</button>
    </nav>

    <div class="storefront-content">
        <div id="courses-panel" class="storefront-panel active">
            {% if skills %}
                <div class="card-grid">
                    {% for skill in skills %}
                    <!-- THIS IS THE EXACT CARD STRUCTURE FROM templates/skills/skills.html -->
                    <a href="{{ url_for('skill_detail_page', skill_id=skill.id) }}" class="card-link">
                        <article class="card">
                            <div class="card-image-container" style="aspect-ratio: 16/9;">
                                <img src="{{ skill.image_url | transform_cloudinary }}" alt="{{ skill.name }}" class="card-image">
                            </div>
                            <div class="card-body">
                                <p class="card-category">{{ skill.category }}</p>
                                <h3 class="card-title">{{ skill.name }}</h3>
                            </div>
                        </article>
                    </a>
                    {% endfor %}
                </div>
            {% else %}
                <div class="empty-panel-message">
                    <h3>No Courses Yet</h3>
                    <p>{{ creator.displayName or 'This creator' }} hasn't published any courses.</p>
                </div>
            {% endif %}
        </div>

        <div id="products-panel" class="storefront-panel">
            {% if products %}
                <div class="card-grid">
                    {% for product in products %}
                    <!-- THIS IS THE EXACT CARD STRUCTURE FROM templates/products/marketplace.html -->
                    <a href="{{ url_for('product_detail_page', product_id=product.id) }}" class="card-link">
                        <article class="card">
                            <div class="card-image-container" style="aspect-ratio: 1/1;">
                                <img src="{{ product.image_url | transform_cloudinary }}" alt="{{ product.name }}" class="card-image">
                            </div>
                            <div class="card-body">
                                <p class="card-category">{{ product.category or 'Product' }}</p>
                                <h3 class="card-title">{{ product.name }}</h3>
                                <div class="card-footer">
                                    <span class="card-price">{{ "%.2f MAD"|format(product.price|float) }}</span>
                                    <!-- Author info correctly removed as we are on their page -->
                                </div>
                            </div>
                        </article>
                    </a>
                    {% endfor %}
                </div>
            {% else %}
                 <div class="empty-panel-message">
                    <h3>No Products Yet</h3>
                    <p>{{ creator.displayName or 'This creator' }} hasn't published any products for sale.</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}