{% extends "base.html" %}

{% block title %}Shopping Cart - NissaHub{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>Your Shopping Cart</h1>
    </div>

    <div id="cart-container">
        <!-- This is the professional empty cart message, now with a display:flex style by default in the SCSS -->
        <div id="empty-cart-message" class="empty-cart-container" style="display: none;">
            <div class="empty-cart-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
            </div>
            <h3>Your cart is empty</h3>
            <p>Looks like you haven't added anything to your cart yet. Explore our marketplace to find something special.</p>
            <a href="{{ url_for('marketplace_page') }}" class="btn btn-primary btn-lg">Discover Products</a>
        </div>
        
        <!-- DEFINITIVE FIX: This layout is now perfectly structured for cart.js -->
        <div class="cart-layout" id="cart-layout-box" style="display: none;">
            <div class="cart-items-list">
                <table class="cart-table">
                    <thead>
                        <tr>
                            <th colspan="2">Product</th>
                            <th>Price</th>
                            <th></th> <!-- For the remove button -->
                        </tr>
                    </thead>
                    <tbody id="cart-items-container">
                        <!-- JS injects cart item rows here -->
                    </tbody>
                </table>
            </div>
            <div class="cart-summary" id="cart-summary-box">
                <h3>Order Summary</h3>
                <div class="summary-row">
                    <span>Subtotal</span>
                    <span id="cart-subtotal">0.00 MAD</span>
                </div>
                <div class="summary-row total-row">
                    <span>Total</span>
                    <span id="cart-total">0.00 MAD</span>
                </div>
                <a href="{{ url_for('checkout_page') }}" class="btn btn-primary btn-block btn-lg">Proceed to Checkout</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}