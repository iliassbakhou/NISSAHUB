{% extends "base.html" %}

{% block title %}Explore Courses - NissaHub{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>Explore Courses</h1>
        <p>Learn a new skill from an amazing community of creators.</p>
    </div>
    
    <form class="skills-filter-form" method="GET" action="{{ url_for('skills_page') }}">
        <div class="form-group">
            <input type="search" name="query" placeholder="Search for a skill..." value="{{ search_query or '' }}">
        </div>
        <div class="form-group">
            <select name="category">
                <option value="">All Categories</option>
                {% for category in categories %}
                <option value="{{ category }}" {% if category == selected_category %}selected{% endif %}>{{ category }}</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Filter</button>
    </form>

    {% if skills %}
    <div class="card-grid">
        {% for skill in skills %}
        <!-- DEFINITIVE FIX: Rebuilt this loop to use the one, professional card structure -->
        <a href="{{ url_for('skill_detail_page', skill_id=skill.id) }}" class="card-link">
            <article class="card">
                <div class="card-image-container" style="aspect-ratio: 16/9;">
                    <img src="{{ skill.image_url | transform_cloudinary }}" alt="{{ skill.name }}" class="card-image">
                </div>
                <div class="card-body">
                    <p class="card-category">{{ skill.category }}</p>
                    <h3 class="card-title">{{ skill.name }}</h3>
                </div>
            </article>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state-message" style="background-color: #fff; padding: 4rem; text-align: center; border-radius: 8px;">
        <p>No courses found matching your criteria. Try a different search!</p>
    </div>
    {% endif %}
</div>
{% endblock %}